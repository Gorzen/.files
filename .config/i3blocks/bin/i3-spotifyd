#!/bin/zsh

case $BLOCK_BUTTON in
  1) playerctl previous ;; # Left click
  2) playerctl play-pause ;; # Middle click
  3) playerctl next ;; # Right click
esac

artist=$(playerctl metadata artist 2> /dev/null)
title=$(playerctl metadata title 2> /dev/null)

if [ -n "$artist" ] && [ -n "$title" ]; then
  printf "$artist - $title\n"
else
  # Check if spotifyd is running
  if [ -n "$(pgrep ^spotifyd$)" ]; then
    # Print empty string such we can still click on the block
    printf "\n"
  fi
fi
